language: python
python:
  - '2.7'
  - '3.3'
  - '3.4'
services:
  - redis-server
install:
  - pip install -r requirements.txt
  - pip install coveralls
script:
  - py.test --cov
env:
  global:
  - DATABASE_URL=postgres:///appointments
  - CELERY_URL=redis://localhost:6379
  - secure: aYUn/oDrAuDA5yrNuy0ROMhSevWtLPJxeCYuMMERDiZkrVfU5aZ8Eg93jLw5wUvgfJxRq6Cbx+da+1+ceyhi3u5V5YdtUuSGkY6xgkatMttYCvVE51MHv6n9tRWEUFRi6plkh7YH5uBA6UP3Ej20clKXjdWICBcO1eRWQmbJSGjel600ZyfRVKt8r2skJ0rB7fn247XDj1W0aIAmlLlJNTBwOC+YjVT4Nfywze/P+PDVRoyNN4uK4fGXYoN3bgdSvKLlWPWb8BAIt1CVv5m2S5ehvYEEtGwA4par+93fDIBaZUou4G8XAXyg+Mj1YhZY16AyFtvPIlsRe2RTvl4RJd0oZZAp6mvk59bZP6+T+lxvX57XEE3PHYPG8OXo+G94OyrsQXSTeD1ROtolJ+wkA8QpCsqYf+NISvtplgyIZZy0CmrRLCFg7otClKmnn/3G0XwQHVAfjSIn/tN4MM0aJFS4BSlD9fQM0l4L1KhK4HRrF/b6yY9Cvibzhn3SxvjcbWGhHqhtcIGIWglw44U4xpIOCQgB2zUBTTHqbuT4aqC4jf8sVnv2if3+z+Fqwmurc0KPWcEzUsPZe954R+JMOskg6xH2HDvteZUdLOOAIr+oQv4eJlNI4dOhLijeAXXzXpzWJtu4XuFU/Cj/51/A7MuMcmIl3TPyunFfEct81M0=
  - secure: dsDnDA4y8bGkNkz19oMiPAR23TzRfIHPosM2QsbkzLaAblba+G4UOf9xETgDxC2e4QMA6d4CRLt26uTgfM19rVGgffWZnjq1Spe3vEh8pFd5qsABvu7wH8U+e2HFdFwLHdbTsAzvWZ21LUBkqa3scPWdSXyqmrcCIyNWG+b8bZ+JlkAlAtvJid5PVscuzMd9JPFgIl/gC/4cDvz/lc9ZSXxyv7yjl9CmDYIzuqDEmAOa5ciINLGv4hg/IasKHgghj+/eHaTyJLeTDscRWeAYYkLcOJpc6X5dfWllUD21ICnoGdb5lJffkQnHldpbyE/yLKWcD4+4a3bxyTXYpY6+nmVAEgoy7IOrePyYNDGqK1ENgKqL6CiqGm71w49f6uV+UtNQ1gDrupphs1FsCJe0ripH21nNXisMpJX0MJu7dqDiR2JA0XGfveTq956oav7vyuze7NKAZ80jGyPW7wN4m75/hZKgn16G6KbKqqh9s/SRkyScHeuovyNLq+0Q4jq5a6ItKKjylBMOxnL4V/NBCr9hugW/HL3UH4qupz3QZLI5+G0xCUsRXlGb+TSquA2poGLBPAv+7HrDWbRY5fBNYlzgc2wW0FCB9ElODw38hAOBpywqCxJV+Sn3BMwAW+Bi/4zH9LeSDjgS41iVrQKHkqXBs2PuRnQqctipRRJAmFI=
  - secure: 3WKCQVNqLruos/DRdCQmuggA3BdedQfE4VU6Nvj7ZayAHA6DWzYSfnHpSWx2H7FlLsDwwTMki1Rn6aLs4HCNhNJKgXaxPpJ6MqyEd+XZqknihw+W0PIwTt3X26r6Rj+lW1lT5UsStqT7o3DFH8q84njqiYj6Go0fy4qLsjMWdnoXl+ACLs2bPEOOulijpn3zAY/7tOZC7OF/716acVKOrMA5HAsi/R+SD8QTZ8KcxMsgamKjQ0+QQ8Cck2LkTfKOUXBRO/30fxl3F7mlDrHJo3pII1wDZ/Spq14ozde6yCgJfIxYVEl8Iwn48Y0SKotD+Ay2oYT6gWfRF8Epk8j8a3i5wfn80vUex8hYIURb93G0LYETlthcZaUrUD9KcgwMZtRGzRDnoOwt6Gxk/g5ct7NtMej0IhZ5JsMLu3oty0BsK+6suqMvzfhwODKuZZe9mpdYrlYH8/bM5woZ1aJoXccCLv44v95bEERxO+uXakSZrNdcs4uIxPtNP3pAEPJdzYfLgEeTueGjwMuLfKducQqWUMamK62gs1FdTzQiO3sjn6FT0DFdbD8eUYSF8HjoIDrz5ogPfv/1T+Duc8YwGzi0dqA1CHpq7cxTJ2j+gYPwO8TiDDqDBGviVPrKjxzSCl9LNs61pGnG3eeFyOgxwbzIpoCqGM27p56S8AFwPn8=
  - secure: b5taWjT61S/hSLFHNKKI6bbY1f1IalLytvvhw0sXwCJSOqIU5WYYuHvazcO9NCiPmJG3fQpkFz3y9z/cIQ/W+JWDVfujuWedKrFZE7iB7YGz+dUci2azmQkX3onHSZqexfkTBWtVKGRJH9z+1eEZV0iCKTRP96OVCdJoDw0M0fgtZP96xbMH72292kcSSkV1A+w0LTtJJ8qVK3WJsMQda/vPQOZY2yeFYAKPQ+LSxCPx8/jhGKXUD99pvRPiqudvyiPVOpRjxqhlbS+M1XkUGCqccuAV92xrw0OnFuCY9rItTiMrPvfw+xmPlh8C4N81yiYkCIf+hOrkJb4MahEOgcrcYjCPREWULp4CcydSWf3gTiQm3wVz+Oxi5/09+NDtBHqT0BbQmObMOqX/xa3N2ZwNuUqrP21MLtFciESCYvc7hfU6/Nb6FSeAK5Kz2hnwC2FfmGCbkgO4ZVo6MPsmVeoCfWNIZF7kL7V7G+YAcDj0FGcrFzdvQ17W6y7fHUHa2Vsw+8DIVdbN7Q1/dtIM4L+t8vwroFfaMv3HNQRWz6UppgfbyvHSDHDXEQudrEF3fZ9O1yjaJ43T5hp2BlIyfx3H9j5Ogej/usEocETebJ6Ki/SYqaxx9s4RWsQWkl9SlTWZmdsnxqLnD5AGYW4brqDhnxhoyLNFhxcwXlPkwj0=
before_script:
  - psql -c 'create database appointments;' -U postgres
  - alembic upgrade +1
after_success:
  - coveralls
